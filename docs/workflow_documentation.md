
# GitHub Actions MLOps Workflow

This document provides a detailed explanation of the GitHub Actions workflow defined in `.github/workflows/mlops_pipeline.yaml`. This workflow automates the machine learning pipeline, from data processing and model training to building and publishing the application containers.

## Overview

The MLOps pipeline is designed to ensure a consistent and reproducible process for training, evaluating, and packaging the house price prediction model. It is divided into two main jobs that run sequentially:

1.  **`build-and-train`**: This job handles the core machine learning tasks, including data preparation, feature engineering, and model training.
2.  **`build-and-push`**: This job takes the applications (FastAPI and Streamlit), packages them as Docker containers, and publishes them to the GitHub Container Registry.

## Workflow Triggers

The workflow is automatically triggered on every `push` to the `main` branch. This means that whenever new code is merged into the main branch, the entire pipeline will be executed.

```yaml
on:
  push:
    branches:
      - main
```

## Jobs

### 1. `build-and-train`

This job is responsible for the continuous integration and training part of the MLOps lifecycle.

**Steps:**

- **`Checkout code`**: Downloads the latest version of the code from the repository.
- **`Set up Python`**: Installs Python 3.11 to ensure a consistent environment.
- **`Install dependencies`**: Installs all the required Python libraries from the `requirements.txt` file.
- **`Start MLflow Tracking Server`**: Uses Docker Compose to launch the MLflow server, which is used to track experiments and register models.
- **`Run Data Processing`**: Executes the script to clean and preprocess the raw data.
- **`Run Feature Engineering`**: Runs the script to create new features from the cleaned data.
- **`Run Model Training`**: Trains the machine learning model, logs metrics and parameters to MLflow, and registers the trained model in the MLflow Model Registry.

### 2. `build-and-push`

This job handles the continuous delivery part of the workflow. It runs only after the `build-and-train` job has completed successfully.

**Steps:**

- **`Checkout code`**: Downloads the code again for this job.
- **`Log in to GitHub Container Registry`**: Authenticates with the GitHub Container Registry using a temporary `GITHUB_TOKEN`. This token is automatically generated by GitHub Actions and is a secure way to push images.
- **`Build and push FastAPI image`**: Builds the Docker image for the FastAPI application and pushes it to the GitHub Container Registry. The image is tagged with the Git commit SHA for easy identification.
- **`Build and push Streamlit image`**: Does the same for the Streamlit application.

## Secrets

The workflow uses a secret named `GITHUB_TOKEN` to authenticate with the GitHub Container Registry. This is a built-in secret provided by GitHub Actions, so you do not need to configure it manually.

## Next Steps

This workflow automates the CI/CT (Continuous Integration/Continuous Training) and the packaging of the application. The final step in a complete MLOps pipeline would be **Continuous Deployment (CD)**, which involves:

1.  Creating a deployment environment (e.g., a Kubernetes cluster or a cloud service).
2.  Adding a new job to the workflow to automatically deploy the newly built container images to that environment.

This would make the updated model and application available to end-users without any manual intervention.
